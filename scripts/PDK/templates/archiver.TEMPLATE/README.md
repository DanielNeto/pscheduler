## Creating and Understanding a pScheduler Archiver

### 1. Understanding pScheduler Archivers
Before writing an archiver, it's important to understand how archivers are used in pScheduler as well as the perfSONAR 
best practices for developers. The wiki (https://github.com/perfsonar/project/wiki) contains help on how to develop for perfSONAR
in general. Examples of archivers can be found in the pScheduler source code (anything with archiver in the folder name in the 
main directory is an archiver).

### 2. Running the PDK setup script
Once you understand what you want to accomplish with your archiver, you'll want to make sure you have a pScheduler development 
environment set up on your development machine. The instructions for how to do this can be found on the general README page for 
the pScheduler repository. Then, you'll want to run the plugin_dev script as specified in the PDK README. This script will set 
up all of the files you need for your archiver and fill in the boilerplate code needed for a basic perfSONAR archiver. You
may also want to run the make commands indicated in the PDK README to make sure that everything is ready to go out of the box.

### 3. Developing your archiver
After the files are generated, you're ready to begin developing! Below we have a more thorough explanation of all of the files 
and directories generated by the plugin_dev script, which may be helpful to read through before you begin writing code.

### 4. Testing your archiver
There are two main ways to test your archiver:

1. Testing with scheduled pScheduler tasks or

2. Testing with premade JSON files

It's important to utilize both means of testing in your development workflow. However, for debugging purposes, the second 
testing method is usually more useful in terms of output and is also much faster.

#### Method 1:

-Follow the pScheduler documentation on how to use an archiver (https://github.com/perfsonar/pscheduler/wiki/Archivers)

#### Method 2:

_This method is somewhat more involved to set up, but ultimately it will allow you to debug much easier. If you do not run 
your archiver in this way, you will *not* be able to see any print statements you generate in your archiver code. *This 
includes error messages!* Running your archiver in the regular scheduled test format is important to verify that it works 
in that manner because that is how it will be used "in the wild", however, it will "fail silently" when run that way which won't 
help you make progress in developing it._

1. Obtain output JSON

-The easiest way to do this is to use the syslog archiver provided by pScheduler (https://github.com/perfsonar/pscheduler/wiki/Archivers#syslog)
Run a pScheduler task of your choice (a good default choice is idle) and output to the syslog archiver. The syslog archiver 
will generate a JSON blob of output that you can then use with your archiver. To access the output from the syslog archiver 
type in 
```sudo less /var/log/messages``` and use ```<``` to go to the end of the file (where your output should be if you just ran
 the task)
